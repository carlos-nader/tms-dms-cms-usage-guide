<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Falcon BMS Guide - Name Generator & Rules (Completo)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(30, 35, 45, 0.95);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #208a9e 0%, #32b8c6 100%);
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
            color: #fff;
        }

        .header p {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .tabs-container {
            display: flex;
            border-bottom: 2px solid #2a3142;
            background: rgba(10, 15, 25, 0.5);
            overflow-x: auto;
        }

        .tab-button {
            flex: 1;
            padding: 16px 20px;
            background: none;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab-button:hover {
            background: rgba(32, 138, 158, 0.1);
            color: #208a9e;
        }

        .tab-button.active {
            color: #32b8c6;
            border-bottom-color: #32b8c6;
            background: rgba(50, 184, 198, 0.05);
        }

        .tab-content {
            display: none;
            padding: 40px;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
            color: #cbd5e1;
        }

        .form-group label .info-link {
            float: right;
            background: #208a9e;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .form-group label .info-link:hover {
            background: #32b8c6;
        }

        input[type="text"],
        input[type="date"],
        select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid #374151;
            border-radius: 6px;
            color: #e0e0e0;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus,
        input[type="date"]:focus,
        select:focus {
            outline: none;
            border-color: #208a9e;
            background: rgba(15, 23, 42, 0.95);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        button.generate {
            background: linear-gradient(135deg, #208a9e 0%, #32b8c6 100%);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }

        button.generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(32, 138, 158, 0.3);
        }

        button.generate:active {
            transform: translateY(0);
        }

        button.reset {
            background: rgba(107, 114, 128, 0.3);
            color: #9ca3af;
            border: 1px solid #4b5563;
            padding: 14px 32px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        button.reset:hover {
            background: rgba(107, 114, 128, 0.5);
            color: #d1d5db;
        }

        .result-box {
            background: rgba(15, 50, 60, 0.5);
            border: 2px solid #208a9e;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-box h3 {
            color: #32b8c6;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .result-display {
            background: rgba(10, 15, 25, 0.8);
            padding: 16px;
            border-radius: 6px;
            border-left: 4px solid #32b8c6;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            color: #4ade80;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .validation-box {
            background: rgba(15, 50, 60, 0.3);
            border: 1px solid #208a9e;
            border-radius: 6px;
            padding: 12px;
            margin-top: 12px;
            font-size: 13px;
        }

        .validation-item {
            display: flex;
            align-items: center;
            margin: 6px 0;
        }

        .validation-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            margin-right: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }

        .validation-icon.pass {
            background: #10b981;
            color: white;
        }

        .validation-icon.fail {
            background: #ef4444;
            color: white;
        }

        .validation-text {
            flex: 1;
        }

        .copy-button {
            background: #374151;
            color: #9ca3af;
            border: 1px solid #4b5563;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 12px;
        }

        .copy-button:hover {
            background: #4b5563;
            color: #d1d5db;
        }

        .copy-button.copied {
            background: #10b981;
            color: white;
        }

        /* Rules Tabs */
        .rules-content {
            line-height: 1.8;
        }

        .rules-content h2 {
            color: #32b8c6;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
            border-bottom: 2px solid #208a9e;
            padding-bottom: 10px;
        }

        .rules-content h3 {
            color: #cbd5e1;
            margin-top: 20px;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .rules-content h4 {
            color: #a0aec0;
            margin-top: 16px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .rules-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 6px;
            overflow: hidden;
        }

        .rules-content th,
        .rules-content td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #374151;
        }

        .rules-content th {
            background: rgba(32, 138, 158, 0.2);
            color: #32b8c6;
            font-weight: 600;
        }

        .rules-content tr:hover {
            background: rgba(32, 138, 158, 0.05);
        }

        .rules-content ul,
        .rules-content ol {
            margin-left: 24px;
            margin-bottom: 15px;
        }

        .rules-content li {
            margin-bottom: 8px;
        }

        .rules-content code {
            background: rgba(15, 23, 42, 0.8);
            padding: 2px 6px;
            border-radius: 4px;
            color: #4ade80;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .example-box {
            background: rgba(15, 23, 42, 0.6);
            border-left: 4px solid #32b8c6;
            padding: 16px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .example-box strong {
            color: #32b8c6;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: #208a9e;
            text-decoration: underline dotted;
        }

        .tooltip-content {
            visibility: hidden;
            background-color: rgba(15, 23, 42, 0.95);
            color: #e0e0e0;
            text-align: left;
            border-radius: 6px;
            padding: 10px 12px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            width: 200px;
            border: 1px solid #208a9e;
            font-size: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            line-height: 1.4;
        }

        .tooltip:hover .tooltip-content {
            visibility: visible;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            background: rgba(32, 184, 198, 0.2);
            color: #4ade80;
        }

        .alert-warning {
            background: rgba(239, 68, 68, 0.15);
            border-left: 4px solid #ef4444;
            padding: 12px 16px;
            border-radius: 4px;
            margin: 15px 0;
            color: #fca5a5;
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.15);
            border-left: 4px solid #10b981;
            padding: 12px 16px;
            border-radius: 4px;
            margin: 15px 0;
            color: #a7f3d0;
        }

        @media (max-width: 768px) {
            .tab-content {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 22px;
            }

            .tab-button {
                font-size: 12px;
                padding: 12px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Falcon BMS Guide ‚Äî Completo com Valida√ß√µes</h1>
            <p>Gerador de nomes + Regras + Valida√ß√µes cr√≠ticas</p>
        </div>

        <div class="tabs-container">
            <button class="tab-button active" onclick="switchTab(event, 'wip-gen')">Gerar Nome WIP</button>
            <button class="tab-button" onclick="switchTab(event, 'version-gen')">Gerar Nome Version</button>
            <button class="tab-button" onclick="switchTab(event, 'wip-rules')">Regras WIP</button>
            <button class="tab-button" onclick="switchTab(event, 'version-rules')">Regras Version</button>
        </div>

        <!-- TAB 1: Gerar Nome WIP -->
        <div id="wip-gen" class="tab-content active">
            <h2>Gerador de Nome WIP üìù</h2>
            <p style="color: #9ca3af; margin-bottom: 24px;">Crie nomes para arquivos de trabalho em progresso</p>

            <div class="form-row">
                <div class="form-group">
                    <label>
                        Tipo de Arquivo
                        <span class="info-link" title="Ver detalhes" onclick="switchTab(event, 'wip-rules'); scrollToSection('categorias')">?</span>
                    </label>
                    <select id="wipType" onchange="updateWipTemplate()">
                        <option value="">Selecione um tipo...</option>
                        <option value="chapter">chapter (Cap√≠tulo completo)</option>
                        <option value="section">section (Se√ß√£o/Subse√ß√£o)</option>
                        <option value="table">table (Tabela HOTAS)</option>
                        <option value="notes">notes (Notas e pesquisa)</option>
                        <option value="visual">visual (Diagramas e visuais)</option>
                    </select>
                </div>
            </div>

            <!-- Campos din√¢micos -->
            <div id="wipFields"></div>

            <div class="form-row">
                <div class="form-group">
                    <label>
                        T√≠tulo/Descri√ß√£o
                        <span class="info-link" title="M√°x 30 chars">?</span>
                    </label>
                    <input type="text" id="wipTitle" placeholder="Ex: fcr-crm-modes" maxlength="50">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Data (YYYY-MM-DD)</label>
                    <input type="date" id="wipDate">
                </div>
            </div>

            <div class="button-group">
                <button class="generate" onclick="generateWipName()">Gerar Nome WIP</button>
                <button class="reset" onclick="resetWipForm()">Limpar</button>
            </div>

            <div id="wipResult" class="result-box">
                <h3>Nome Gerado:</h3>
                <div class="result-display" id="wipNameDisplay"></div>
                <div class="validation-box" id="wipValidation"></div>
                <button class="copy-button" onclick="copyToClipboard('wipNameDisplay')">üìã Copiar para Clipboard</button>
            </div>
        </div>

        <!-- TAB 2: Gerar Nome Version System -->
        <div id="version-gen" class="tab-content">
            <h2>Gerador de Nome Version System üî¢</h2>
            <p style="color: #9ca3af; margin-bottom: 24px;">Crie nomes para snapshots com valida√ß√£o sem√¢ntica</p>

            <div class="form-group">
                <label>
                    Vers√£o Atual do guide.tex
                    <span class="info-link" title="Ex: 0.1.4.0 ou 1.0.0">?</span>
                </label>
                <input type="text" id="currentVersion" placeholder="Ex: 0.1.4.0 ou 1.0.0" onchange="detectRegime()">
            </div>

            <div id="regimeInfo" style="background: rgba(32, 138, 158, 0.15); border-left: 4px solid #208a9e; padding: 12px 16px; border-radius: 4px; margin-bottom: 24px; display: none;">
                <strong style="color: #32b8c6;">Regime Detectado:</strong>
                <span id="regimeType" style="margin-left: 8px;"></span>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Tipo de Mudan√ßa</label>
                    <select id="changeType">
                        <option value="">Selecione o tipo de mudan√ßa...</option>
                        <optgroup id="preGroup" label="Pr√©-Publica√ß√£o (0.x.x.x)">
                            <option value="new-chapter">Novo cap√≠tulo entra no guide</option>
                            <option value="restructure-chapter">Reestrutura√ß√£o de se√ß√µes</option>
                            <option value="table-major">Tabelas mudam uso do cap√≠tulo</option>
                            <option value="latex-bugfix">Corre√ß√£o de erros LaTeX</option>
                            <option value="typo-fix">Typos e micro-ajustes</option>
                            <option value="table-minor">Ajustes pequenos em tabelas</option>
                        </optgroup>
                        <optgroup id="postGroup" label="P√≥s-Publica√ß√£o (‚â•1.0)" style="display:none;">
                            <option value="major-reorg">Reorganizar estrutura (MAJOR)</option>
                            <option value="scope-change">Mudar escopo global (MAJOR)</option>
                            <option value="add-chapter">Adicionar novo cap√≠tulo (MINOR)</option>
                            <option value="expand-chapters">Expandir cap√≠tulos (MINOR)</option>
                            <option value="errata">Corre√ß√µes localizadas (PATCH)</option>
                            <option value="typo">Typos e gram√°tica (PATCH)</option>
                        </optgroup>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Data do Snapshot (YYYYMMDD)</label>
                    <input type="date" id="snapshotDate">
                </div>
            </div>

            <div class="button-group">
                <button class="generate" onclick="generateVersionName()">Gerar Nome de Snapshot</button>
                <button class="reset" onclick="resetVersionForm()">Limpar</button>
            </div>

            <div id="versionResult" class="result-box">
                <h3>Snapshot Gerado:</h3>
                <div style="margin-bottom: 16px;">
                    <div style="color: #9ca3af; font-size: 12px; margin-bottom: 6px;">Nome do arquivo:</div>
                    <div class="result-display" id="versionNameDisplay"></div>
                </div>
                <div style="margin-bottom: 16px;">
                    <div style="color: #9ca3af; font-size: 12px; margin-bottom: 6px;">Macros LaTeX:</div>
                    <div class="result-display" id="versionMacrosDisplay"></div>
                </div>
                <div class="validation-box" id="versionValidation"></div>
                <button class="copy-button" onclick="copyToClipboard('versionNameDisplay')">üìã Copiar Nome</button>
                <button class="copy-button" onclick="copyToClipboard('versionMacrosDisplay')" style="margin-left: 8px;">üìã Copiar Macros</button>
            </div>
        </div>

        <!-- TAB 3: Regras WIP -->
        <div id="wip-rules" class="tab-content">
            <div class="rules-content">
                <h2>üìã Regras WIP - Conven√ß√£o de Nomes</h2>

                <h3 id="categorias">Categorias de Arquivos</h3>
                <table>
                    <tr>
                        <th>Tipo</th>
                        <th>Padr√£o</th>
                        <th>Exemplo</th>
                    </tr>
                    <tr>
                        <td><strong>Chapter</strong></td>
                        <td><code>chapter-C{N}-{TITLE}-{STATUS}-{DATE}.tex</code></td>
                        <td><code>chapter-C3-tms-target-management-dev-2026-01-09.tex</code></td>
                    </tr>
                    <tr>
                        <td><strong>Section</strong></td>
                        <td><code>section-C{N}-S{M}[-S{K}]-{TITLE}-{STATUS}-{DATE}.tex</code></td>
                        <td><code>section-C3-S2-fcr-crm-modes-review-2026-01-18.tex</code></td>
                    </tr>
                    <tr>
                        <td><strong>Table</strong></td>
                        <td><code>table-C{N}-{CONTEXT}-{SWITCH}-{STATUS}-{DATE}.tex</code></td>
                        <td><code>table-C3-AA-TMS-dev-2026-01-15.tex</code></td>
                    </tr>
                    <tr>
                        <td><strong>Notes</strong></td>
                        <td><code>notes-C{N}-{TOPIC}-{TYPE}-{DATE}.md</code></td>
                        <td><code>notes-C5-cms-structure-outline-2026-01-15.md</code></td>
                    </tr>
                    <tr>
                        <td><strong>Visual</strong></td>
                        <td><code>visual-C{N}-{DESC}-{TYPE}-{STATUS}-{DATE}.{ext}</code></td>
                        <td><code>visual-C7-tms-hat-layout-diagram-dev-2026-01-28.svg</code></td>
                    </tr>
                </table>

                <h3>Status Codes</h3>
                <table>
                    <tr>
                        <th>Status</th>
                        <th>Significado</th>
                        <th>Arquivo em WIP?</th>
                        <th>Pr√≥ximo Status</th>
                    </tr>
                    <tr>
                        <td><code>dev</code></td>
                        <td>Bruto, nunca revisado</td>
                        <td>‚úì Sim</td>
                        <td>review, deprecated</td>
                    </tr>
                    <tr>
                        <td><code>review</code></td>
                        <td>Em itera√ß√£o ativa</td>
                        <td>‚úì Sim</td>
                        <td>review, final, deprecated</td>
                    </tr>
                    <tr>
                        <td><code>final</code></td>
                        <td>Aprovado, pronto para integrar</td>
                        <td>‚úì Sim</td>
                        <td>approved, deprecated</td>
                    </tr>
                    <tr>
                        <td><code>approved</code></td>
                        <td>Integrado e arquivado</td>
                        <td>‚úó ARCHIVE/</td>
                        <td>(final)</td>
                    </tr>
                    <tr>
                        <td><code>deprecated</code></td>
                        <td>Abandonado</td>
                        <td>‚úó ARCHIVE/</td>
                        <td>(final)</td>
                    </tr>
                </table>

                <h3 id="transicoes">Transi√ß√µes de Status Permitidas</h3>
                <table>
                    <tr>
                        <th>De</th>
                        <th>Para</th>
                        <th>Permitido?</th>
                        <th>A√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>dev</code></td>
                        <td><code>review</code></td>
                        <td>‚úÖ</td>
                        <td>Renomear, mover em WIP/</td>
                    </tr>
                    <tr>
                        <td><code>review</code></td>
                        <td><code>review</code></td>
                        <td>‚úÖ</td>
                        <td>Itera√ß√£o cont√≠nua (sem rename)</td>
                    </tr>
                    <tr>
                        <td><code>review</code></td>
                        <td><code>final</code></td>
                        <td>‚úÖ</td>
                        <td>Renomear, mover em WIP/</td>
                    </tr>
                    <tr>
                        <td><code>final</code></td>
                        <td><code>approved</code></td>
                        <td>‚úÖ</td>
                        <td>Integrar em guide, mover para ARCHIVE/</td>
                    </tr>
                    <tr>
                        <td><code>review</code></td>
                        <td><code>deprecated</code></td>
                        <td>‚úÖ</td>
                        <td>Abandonar, mover para ARCHIVE/</td>
                    </tr>
                    <tr>
                        <td><code>final</code></td>
                        <td><code>deprecated</code></td>
                        <td>‚úÖ</td>
                        <td>Abandonar, mover para ARCHIVE/</td>
                    </tr>
                    <tr>
                        <td><code>dev</code></td>
                        <td><code>deprecated</code></td>
                        <td>‚úÖ</td>
                        <td>Abandonar, mover para ARCHIVE/</td>
                    </tr>
                    <tr>
                        <td><code>dev</code></td>
                        <td><code>dev</code></td>
                        <td>‚úÖ</td>
                        <td>Salvar (sem rename)</td>
                    </tr>
                </table>

                <div class="alert-warning">
                    <strong>‚ö†Ô∏è Transi√ß√µes Proibidas:</strong><br>
                    ‚ùå review ‚Üí dev (nunca voltar para desenvolvimento bruto)<br>
                    ‚ùå final ‚Üí review (nunca regredir ap√≥s aprova√ß√£o)<br>
                    ‚ùå final ‚Üí dev (nunca regredir)<br>
                    ‚ùå approved ‚Üí qualquer (imut√°vel ap√≥s integra√ß√£o)<br>
                    ‚ùå deprecated ‚Üí qualquer (final e immut√°vel)
                </div>

                <h3 id="integracao">Integra√ß√£o WIP ‚Üí Guide (Workflow Completo)</h3>
                <p><strong>Quando um arquivo WIP passa para approved:</strong></p>
                <ol>
                    <li><strong>Arquivo em status final:</strong> <code>section-C3-S2-...-final-2026-01-18.tex</code> (em WIP/)</li>
                    <li><strong>Integra√ß√£o manual:</strong> Copia conte√∫do em <code>guide.tex</code> (raiz)</li>
                    <li><strong>Compila e testa:</strong> <code>pdflatex guide.tex</code> sem erros</li>
                    <li><strong>Incrementa vers√£o:</strong> Conforme regras de sem√¢ntica (pr√≥xima aba)</li>
                    <li><strong>Cria snapshot:</strong> <code>guide-vNEW.VERSION-YYYYMMDD.tex</code> em WIP/GUIDE/</li>
                    <li><strong>Renomeia WIP file:</strong> <code>section-C3-S2-...-approved-2026-01-18.tex</code></li>
                    <li><strong>Move para ARCHIVE/:</strong> Arquivo agora em <code>ARCHIVE/section-C3-S2-...-approved-2026-01-18.tex</code></li>
                    <li><strong>Atualiza PROJECT-TRACKING:</strong> Registra integra√ß√£o com vers√£o nova</li>
                </ol>

                <h3 id="estrutura">Estrutura de Pastas</h3>
                <div class="example-box">
                    <strong>WIP/</strong> (work-in-progress - Apenas arquivos com status dev, review, final)<br>
                    ‚îú‚îÄ‚îÄ chapter-*.tex<br>
                    ‚îú‚îÄ‚îÄ section-*.tex<br>
                    ‚îú‚îÄ‚îÄ table-*.tex<br>
                    ‚îú‚îÄ‚îÄ notes-*.md<br>
                    ‚îú‚îÄ‚îÄ visual-*.*<br>
                    ‚îî‚îÄ‚îÄ <strong>GUIDE/</strong><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ guide-v0.1.4.0-20260106.tex (snapshots)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ prepub/ (hist√≥rico pr√©-publica√ß√£o)<br><br>
                    <strong>ARCHIVE/</strong> (completed/deprecated - status approved ou deprecated)<br>
                    ‚îú‚îÄ‚îÄ chapter-*-approved-*.tex<br>
                    ‚îú‚îÄ‚îÄ section-*-approved-*.tex<br>
                    ‚îú‚îÄ‚îÄ *-deprecated-*.tex<br>
                    ‚îî‚îÄ‚îÄ <strong>GUIDE/</strong><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ published/ (snapshots ‚â• v1.0.0)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ prepub/ (snapshots 0.x.x.x)
                </div>

                <h3>Regras Globais de Nomes</h3>
                <ul>
                    <li><strong>Caracteres:</strong> apenas <code>a-z</code>, <code>0-9</code>, h√≠fens <code>-</code></li>
                    <li><strong>Sem espa√ßos:</strong> use h√≠fens para separar palavras</li>
                    <li><strong>Case:</strong> apenas min√∫sculas</li>
                    <li><strong>Sem pontos no slug:</strong> exceto extens√£o (.tex, .md, .svg, etc.)</li>
                    <li><strong>Data:</strong> <code>YYYY-MM-DD</code> (ISO 8601)</li>
                    <li><strong>Comprimento:</strong> m√°ximo 100 caracteres</li>
                </ul>

                <h3>üéØ Regras de Ouro</h3>
                <ol>
                    <li>‚úÖ Template obrigat√≥rio: sempre copiar <code>TEMPLATES/template-wip-V1.0.tex</code></li>
                    <li>‚úÖ WIP n√£o afeta vers√£o: apenas integra√ß√£o incrementa vers√£o</li>
                    <li>‚úÖ Status algor√≠tmico: transi√ß√µes seguem matriz permitida</li>
                    <li>‚úÖ Humano controla aprova√ß√£o: IA n√£o declara final/approved</li>
                    <li>‚úÖ Data em nome: permite rastrear hist√≥rico</li>
                    <li>‚úÖ Sem pontos no slug: clareza de estrutura</li>
                </ol>
            </div>
        </div>

        <!-- TAB 4: Regras Version System -->
        <div id="version-rules" class="tab-content">
            <div class="rules-content">
                <h2>üî¢ Regras Version System - Sem√¢ntica Completa</h2>

                <h3 id="semantica">Sem√¢ntica de Vers√µes (0.x.x.x vs x.x.x)</h3>

                <h4>Pr√©-Publica√ß√£o (0.x.x.x) - Desenvolvimento</h4>
                <table>
                    <tr>
                        <th>Posi√ß√£o</th>
                        <th>Nome</th>
                        <th>Range</th>
                        <th>Significado</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td><strong>MAJOR</strong></td>
                        <td>0 (fixo)</td>
                        <td>Indicador: documento em desenvolvimento, n√£o publicado</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><strong>MINOR</strong></td>
                        <td>1-7</td>
                        <td>Qual cap√≠tulo est√° em desenvolvimento (ordem de entrada)</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><strong>PATCH</strong></td>
                        <td>0+</td>
                        <td>Mudan√ßas estruturais dentro do cap√≠tulo ativo</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><strong>SUBPATCH</strong></td>
                        <td>0+</td>
                        <td>Refinamentos menores (typos, ajustes, n√£o estruturais)</td>
                    </tr>
                </table>

                <div class="alert-success">
                    <strong>Exemplos Pr√©-Publica√ß√£o:</strong><br>
                    ‚Ä¢ <code>0.1.0.0</code> = 1¬∫ cap√≠tulo, estrutura inicial, nenhum refinamento<br>
                    ‚Ä¢ <code>0.2.3.0</code> = 2¬∫ cap√≠tulo, 3¬™ mudan√ßa estrutural, nenhum refinamento<br>
                    ‚Ä¢ <code>0.2.3.2</code> = ... + 2¬∫ refinamento (typo fix)<br>
                    ‚Ä¢ <code>0.7.5.8</code> = 7¬∫ cap√≠tulo (√∫ltimo), 5 mudan√ßas, 8 refinamentos
                </div>

                <h4>P√≥s-Publica√ß√£o (‚â•1.0, x.x.x) - Edi√ß√µes Publicadas</h4>
                <table>
                    <tr>
                        <th>Posi√ß√£o</th>
                        <th>Nome</th>
                        <th>Significado</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td><strong>MAJOR</strong></td>
                        <td>Edi√ß√£o do guia (1¬™ edi√ß√£o = v1, 2¬™ edi√ß√£o = v2, etc.)</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><strong>MINOR</strong></td>
                        <td>Mudan√ßas substanciais mas compat√≠veis com edi√ß√£o</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><strong>PATCH</strong></td>
                        <td>Corre√ß√µes menores e errata (sem mudan√ßa estrutural)</td>
                    </tr>
                </table>

                <div class="alert-success">
                    <strong>Exemplos P√≥s-Publica√ß√£o:</strong><br>
                    ‚Ä¢ <code>1.0.0</code> = 1¬™ edi√ß√£o publicada (mudan√ßa de 0.7.x.x)<br>
                    ‚Ä¢ <code>1.1.0</code> = 1¬™ edi√ß√£o + expans√£o significativa (novo cap√≠tulo ou major reorg)<br>
                    ‚Ä¢ <code>1.1.3</code> = ... + 3¬™ s√©rie de corre√ß√µes (errata)<br>
                    ‚Ä¢ <code>2.0.0</code> = 2¬™ edi√ß√£o (revis√£o ampla)
                </div>

                <h3 id="incremento">Quando Incrementar (Regras Detalhadas)</h3>

                <h4>Incrementos em Pr√©-Publica√ß√£o (0.x.x.x)</h4>
                <table>
                    <tr>
                        <th>Situa√ß√£o</th>
                        <th>Incrementa</th>
                        <th>Zera</th>
                        <th>Exemplo</th>
                    </tr>
                    <tr>
                        <td>Novo cap√≠tulo entra no guide</td>
                        <td><strong>MINOR</strong></td>
                        <td>PATCH, SUBPATCH</td>
                        <td>0.1.4.2 ‚Üí 0.2.0.0</td>
                    </tr>
                    <tr>
                        <td>Nova se√ß√£o relevante em cap√≠tulo ativo</td>
                        <td><strong>PATCH</strong></td>
                        <td>SUBPATCH</td>
                        <td>0.1.1.3 ‚Üí 0.1.2.0</td>
                    </tr>
                    <tr>
                        <td>Reestrutura√ß√£o de se√ß√µes/subse√ß√µes</td>
                        <td><strong>PATCH</strong></td>
                        <td>SUBPATCH</td>
                        <td>mudan√ßa estrutural no cap√≠tulo ativo</td>
                    </tr>
                    <tr>
                        <td>Tabelas HOTAS mudam fundamentalmente</td>
                        <td><strong>PATCH</strong></td>
                        <td>SUBPATCH</td>
                        <td>nova tabela central = mudan√ßa estrutural</td>
                    </tr>
                    <tr>
                        <td>Corrigir erros LaTeX graves</td>
                        <td><strong>PATCH</strong></td>
                        <td>SUBPATCH</td>
                        <td>erros que impediam compila√ß√£o</td>
                    </tr>
                    <tr>
                        <td>Typos, pontua√ß√£o, ajustes menores</td>
                        <td><strong>SUBPATCH</strong></td>
                        <td>nada</td>
                        <td>0.1.4.0 ‚Üí 0.1.4.1</td>
                    </tr>
                    <tr>
                        <td>Ajustes pequenos em c√©lulas de tabela</td>
                        <td><strong>SUBPATCH</strong></td>
                        <td>nada</td>
                        <td>refinamento local</td>
                    </tr>
                </table>

                <h4>Incrementos em P√≥s-Publica√ß√£o (‚â•1.0)</h4>
                <table>
                    <tr>
                        <th>Situa√ß√£o</th>
                        <th>Incrementa</th>
                        <th>Zera</th>
                        <th>Exemplo</th>
                    </tr>
                    <tr>
                        <td>Reorganizar estrutura de cap√≠tulos</td>
                        <td><strong>MAJOR</strong></td>
                        <td>MINOR, PATCH</td>
                        <td>merges/splits de cap√≠tulos</td>
                    </tr>
                    <tr>
                        <td>Mudar escopo global do guia</td>
                        <td><strong>MAJOR</strong></td>
                        <td>MINOR, PATCH</td>
                        <td>novo "bloco" grande ou foco</td>
                    </tr>
                    <tr>
                        <td>Adaptar para nova vers√£o do BMS</td>
                        <td><strong>MAJOR</strong></td>
                        <td>MINOR, PATCH</td>
                        <td>compatibilidade de plataforma</td>
                    </tr>
                    <tr>
                        <td>Adicionar novo cap√≠tulo importante</td>
                        <td><strong>MINOR</strong></td>
                        <td>PATCH</td>
                        <td>1.0.0 ‚Üí 1.1.0</td>
                    </tr>
                    <tr>
                        <td>Expandir cap√≠tulos com se√ß√µes chave</td>
                        <td><strong>MINOR</strong></td>
                        <td>PATCH</td>
                        <td>adi√ß√£o de conte√∫do significativo</td>
                    </tr>
                    <tr>
                        <td>Reorganizar subset de cap√≠tulos</td>
                        <td><strong>MINOR</strong></td>
                        <td>PATCH</td>
                        <td>reorganiza√ß√£o interna limitada</td>
                    </tr>
                    <tr>
                        <td>Corrigir erros localizados</td>
                        <td><strong>PATCH</strong></td>
                        <td>nada</td>
                        <td>1.1.0 ‚Üí 1.1.1</td>
                    </tr>
                    <tr>
                        <td>Typos, gram√°tica, clareza, refs</td>
                        <td><strong>PATCH</strong></td>
                        <td>nada</td>
                        <td>errata</td>
                    </tr>
                </table>

                <h3 id="macros">Macros LaTeX Obrigat√≥rias (Pre√¢mbulo)</h3>
                <p>Todo snapshot e <code>guide.tex</code> deve conter no pre√¢mbulo:</p>
                <div class="example-box" style="background: rgba(15, 23, 42, 0.8); font-family: 'Courier New', monospace; font-size: 12px;">
                    \newcommand{\docversion}{0.2.3.1}<br>
                    \newcommand{\docbuild}{20260118}<br>
                    \newcommand{\docstartdate}{05 January 2026}<br>
                    \newcommand{\docenddate}{DD MMM 2026}<br>
                    \newcommand{\chapterscompletedof}{2/7}<br>
                    \newcommand{\tablesfilledpct}{35\%}<br>
                    \newcommand{\fulldocversion}{\docversion-\docbuild}
                </div>

                <h4 style="color: #cbd5e1; margin-top: 16px;">Quando Atualizar Cada Macro</h4>
                <ul>
                    <li><code>\docversion</code> = Sempre que vers√£o muda (MAJOR/MINOR/PATCH)</li>
                    <li><code>\docbuild</code> = Sempre que faz snapshot (YYYYMMDD do snapshot)</li>
                    <li><code>\docstartdate</code> = Quando inicia ciclo de publica√ß√£o (muda com MAJOR)</li>
                    <li><code>\docenddate</code> = Data estimada de conclus√£o</li>
                    <li><code>\chapterscompletedof</code> = Contador de cap√≠tulos finalizados</li>
                    <li><code>\tablesfilledpct</code> = Percentual de tabelas preenchidas</li>
                </ul>

                <h3 id="transicao">Transi√ß√£o 0.x.x.x ‚Üí 1.0.0 (Release)</h3>
                <p><strong>Crit√©rios para declarar 1.0:</strong></p>
                <div class="alert-success">
                    <strong>‚úÖ O guia est√° pronto para v1.0 quando:</strong><br>
                    ‚Ä¢ Estrutura de cap√≠tulos est√°vel (C1-C7 definidos)<br>
                    ‚Ä¢ Guia utiliz√°vel na pr√°tica (ao menos 50% de conte√∫do)<br>
                    ‚Ä¢ Revis√£o m√≠nima de consist√™ncia conclu√≠da<br>
                    ‚Ä¢ Compila√ß√£o LaTeX sem warnings cr√≠ticos<br>
                    ‚Ä¢ Testes e valida√ß√£o manual completados
                </div>

                <p><strong>Procedimento de Release:</strong></p>
                <ol>
                    <li>Escolher vers√£o base <code>0.a.b.c</code> que representa "estado 1.0"</li>
                    <li>Atualizar macros no <code>guide.tex</code>: <code>\docversion{1.0.0}</code></li>
                    <li>Compilar e testar: <code>pdflatex guide.tex</code></li>
                    <li>Criar snapshot: <code>WIP/GUIDE/published/guide-v1.0.0-YYYYMMDD.tex</code></li>
                    <li>Copiar para raiz: <code>guide.tex</code> (atualizar)</li>
                    <li>Mover hist√≥rico: <code>WIP/GUIDE/prepub/</code> (documentar transi√ß√£o)</li>
                    <li>Registrar em PROJECT-TRACKING: evento de vers√£o v1.0.0</li>
                </ol>

                <h3>Padr√£o de Nome de Snapshot (Resumido)</h3>
                <div class="alert-success">
                    <strong>Formato:</strong> <code>guide-vMAJOR.MINOR[.PATCH[.SUBPATCH]]-YYYYMMDD.tex</code><br><br>
                    <strong>Exemplos:</strong><br>
                    ‚Ä¢ Pr√©-publica√ß√£o: <code>guide-v0.1.0.0-20260105.tex</code><br>
                    ‚Ä¢ Pr√©-publica√ß√£o: <code>guide-v0.2.3.1-20260118.tex</code><br>
                    ‚Ä¢ Release: <code>guide-v1.0.0-20260210.tex</code><br>
                    ‚Ä¢ P√≥s-publica√ß√£o: <code>guide-v1.1.2-20260315.tex</code><br>
                    ‚Ä¢ Major update: <code>guide-v2.0.0-20260620.tex</code>
                </div>

                <h3 id="sincronizacao">Sincroniza√ß√£o Guide-Snapshots</h3>
                <table>
                    <tr>
                        <th>Arquivo</th>
                        <th>Localiza√ß√£o</th>
                        <th>Prop√≥sito</th>
                        <th>Atualiza√ß√£o</th>
                    </tr>
                    <tr>
                        <td><code>guide.tex</code></td>
                        <td>Raiz do projeto</td>
                        <td>Arquivo principal de trabalho (sempre atualizado)</td>
                        <td>Toda integra√ß√£o ou snapshot</td>
                    </tr>
                    <tr>
                        <td><code>guide-v0.x.x.x-*.tex</code></td>
                        <td>WIP/GUIDE/prepub/</td>
                        <td>Hist√≥rico pr√©-publica√ß√£o (imut√°vel)</td>
                        <td>Uma vez por vers√£o pr√©-pub</td>
                    </tr>
                    <tr>
                        <td><code>guide-v1.x.x-*.tex</code></td>
                        <td>WIP/GUIDE/published/ ou ARCHIVE/GUIDE/</td>
                        <td>Hist√≥rico publicado (imut√°vel)</td>
                        <td>Uma vez por vers√£o pub</td>
                    </tr>
                </table>

                <p><strong>Workflow de Snapshot:</strong></p>
                <ol>
                    <li>Integra arquivo WIP (final) em <code>guide.tex</code></li>
                    <li>Vers√£o incrementa conforme regras (PATCH/MINOR/MAJOR)</li>
                    <li>Atualiza macros (<code>\docversion</code>, <code>\docbuild</code>, etc.)</li>
                    <li>Cria snapshot: <code>guide-vNEW-YYYYMMDD.tex</code></li>
                    <li>Copia snapshot para hist√≥rico (prepub/ ou published/)</li>
                    <li>Copia <code>guide.tex</code> (raiz) do snapshot</li>
                </ol>

                <h3>Princ√≠pio Fundamental ‚≠ê</h3>
                <div class="alert-success">
                    <strong>üéØ Regra de Ouro:</strong><br>
                    Apenas conte√∫do <strong>integrado no arquivo principal <code>guide.tex</code></strong> dispara incremento de vers√£o.<br><br>
                    Arquivos WIP isolados (<code>section-*.tex</code>, <code>table-*.tex</code>, <code>notes-*.md</code>) N√ÉO afetam vers√£o at√© integra√ß√£o.<br><br>
                    <strong>Vers√£o = Estado do guide.tex + snapshots</strong><br>
                    <strong>WIP = Desenvolvimento paralelo (n√£o afeta vers√£o)</strong>
                </div>

                <h3>üéØ Checklist Pr√©-Integra√ß√£o</h3>
                <ul>
                    <li>‚òëÔ∏è Arquivo WIP em status <code>final</code></li>
                    <li>‚òëÔ∏è Conte√∫do compila sem erros LaTeX (<code>pdflatex</code>)</li>
                    <li>‚òëÔ∏è Refer√™ncias cruzadas resolvidas (labels/refs v√°lidas)</li>
                    <li>‚òëÔ∏è Tabelas formatadas corretamente</li>
                    <li>‚òëÔ∏è Nenhuma marca√ß√£o de "TODO" ou "FIXME"</li>
                    <li>‚òëÔ∏è Integra√ß√£o manual em <code>guide.tex</code> testada</li>
                    <li>‚òëÔ∏è Nova vers√£o incrementada conforme regras</li>
                    <li>‚òëÔ∏è Snapshot criado: <code>guide-vNEW-YYYYMMDD.tex</code></li>
                    <li>‚òëÔ∏è Macros atualizadas (<code>\docversion</code>, <code>\docbuild</code>)</li>
                    <li>‚òëÔ∏è Arquivo WIP renomeado para <code>approved</code></li>
                    <li>‚òëÔ∏è Arquivo WIP movido para ARCHIVE/</li>
                    <li>‚òëÔ∏è PROJECT-TRACKING atualizado</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('wipDate').value = today;
            document.getElementById('snapshotDate').value = today;
        });

        // Tab Switching with Event Object
        function switchTab(event, tabName) {
            event.preventDefault();
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // WIP Name Generator with Enhanced Validation
        function updateWipTemplate() {
            const type = document.getElementById('wipType').value;
            const fieldsDiv = document.getElementById('wipFields');
            fieldsDiv.innerHTML = '';

            if (type === 'chapter') {
                fieldsDiv.innerHTML = `
                    <div class="form-group">
                        <label>N√∫mero do Cap√≠tulo (C{N})</label>
                        <select id="wipChapter">
                            <option value="">Selecione...</option>
                            <option value="1">C1</option>
                            <option value="2">C2</option>
                            <option value="3">C3</option>
                            <option value="4">C4</option>
                            <option value="5">C5</option>
                            <option value="6">C6</option>
                            <option value="7">C7</option>
                        </select>
                    </div>
                `;
            } else if (type === 'section') {
                fieldsDiv.innerHTML = `
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cap√≠tulo (C{N})</label>
                            <select id="wipChapter">
                                <option value="">Selecione...</option>
                                <option value="1">C1</option>
                                <option value="2">C2</option>
                                <option value="3">C3</option>
                                <option value="4">C4</option>
                                <option value="5">C5</option>
                                <option value="6">C6</option>
                                <option value="7">C7</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Se√ß√£o (S{M})</label>
                            <input type="number" id="wipSection" min="1" placeholder="Ex: 2">
                        </div>
                        <div class="form-group">
                            <label>Subse√ß√£o (S{K}) - Opcional</label>
                            <input type="number" id="wipSubsection" min="1" placeholder="Opcional">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Status Inicial</label>
                        <select id="wipStatus">
                            <option value="dev" selected>dev (recomendado)</option>
                            <option value="review">review (se j√° revisado)</option>
                        </select>
                    </div>
                `;
            } else if (type === 'table') {
                fieldsDiv.innerHTML = `
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cap√≠tulo (C{N})</label>
                            <select id="wipChapter">
                                <option value="">Selecione...</option>
                                <option value="1">C1</option>
                                <option value="2">C2</option>
                                <option value="3">C3</option>
                                <option value="4">C4</option>
                                <option value="5">C5</option>
                                <option value="6">C6</option>
                                <option value="7">C7</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Contexto</label>
                            <select id="wipContext">
                                <option value="">Selecione...</option>
                                <option value="AA">AA (Air-to-Air)</option>
                                <option value="AG">AG (Air-to-Ground)</option>
                                <option value="DGFT">DGFT (Defensive/TF)</option>
                                <option value="NAV">NAV (Navigation)</option>
                                <option value="MFDS">MFDS (Display)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Switch HOTAS</label>
                            <select id="wipSwitch">
                                <option value="">Selecione...</option>
                                <option value="TMS">TMS</option>
                                <option value="DMS">DMS</option>
                                <option value="CMS">CMS</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Status Inicial</label>
                        <select id="wipStatus">
                            <option value="dev" selected>dev (recomendado)</option>
                            <option value="review">review</option>
                        </select>
                    </div>
                `;
            } else if (type === 'notes') {
                fieldsDiv.innerHTML = `
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cap√≠tulo (C{N}) ou GEN</label>
                            <select id="wipChapter">
                                <option value="">Selecione...</option>
                                <option value="C1">C1</option>
                                <option value="C2">C2</option>
                                <option value="C3">C3</option>
                                <option value="C4">C4</option>
                                <option value="C5">C5</option>
                                <option value="C6">C6</option>
                                <option value="C7">C7</option>
                                <option value="GEN">GEN (cross-chapter)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tipo de Nota</label>
                            <select id="wipNoteType">
                                <option value="">Selecione...</option>
                                <option value="research">research</option>
                                <option value="snippet">snippet</option>
                                <option value="outline">outline</option>
                                <option value="questions">questions</option>
                                <option value="reference">reference</option>
                                <option value="example">example</option>
                            </select>
                        </div>
                    </div>
                `;
            } else if (type === 'visual') {
                fieldsDiv.innerHTML = `
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cap√≠tulo (C{N})</label>
                            <select id="wipChapter">
                                <option value="">Selecione...</option>
                                <option value="1">C1</option>
                                <option value="2">C2</option>
                                <option value="3">C3</option>
                                <option value="4">C4</option>
                                <option value="5">C5</option>
                                <option value="6">C6</option>
                                <option value="7">C7</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tipo de Visual</label>
                            <select id="wipVisualType">
                                <option value="">Selecione...</option>
                                <option value="diagram">diagram</option>
                                <option value="flowchart">flowchart</option>
                                <option value="schematic">schematic</option>
                                <option value="reference">reference</option>
                                <option value="illustration">illustration</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Extens√£o</label>
                            <select id="wipExt">
                                <option value="">Selecione...</option>
                                <option value=".svg">SVG</option>
                                <option value=".pdf">PDF</option>
                                <option value=".png">PNG</option>
                                <option value=".tex">TEX (TikZ)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Status Inicial</label>
                        <select id="wipStatus">
                            <option value="dev" selected>dev</option>
                            <option value="review">review</option>
                        </select>
                    </div>
                `;
            }
        }

        function generateWipName() {
            const type = document.getElementById('wipType').value;
            if (!type) {
                alert('Selecione um tipo de arquivo');
                return;
            }

            const title = document.getElementById('wipTitle').value.trim();
            const date = document.getElementById('wipDate').value;

            if (!title) {
                alert('Preencha o t√≠tulo/descri√ß√£o');
                return;
            }

            if (!date) {
                alert('Selecione uma data');
                return;
            }

            let filename = '';
            let validations = [];

            if (type === 'chapter') {
                const chapter = document.getElementById('wipChapter').value;
                if (!chapter) {
                    alert('Selecione o cap√≠tulo');
                    return;
                }
                filename = `chapter-C${chapter}-${title}-dev-${date}.tex`;
                validations = validateWip(filename, type, { chapter });
            } else if (type === 'section') {
                const chapter = document.getElementById('wipChapter').value;
                const section = document.getElementById('wipSection').value;
                const subsection = document.getElementById('wipSubsection').value;
                const status = document.getElementById('wipStatus').value;

                if (!chapter || !section) {
                    alert('Preencha cap√≠tulo e se√ß√£o');
                    return;
                }

                let sectionPart = `C${chapter}-S${section}`;
                if (subsection) sectionPart += `-S${subsection}`;

                filename = `section-${sectionPart}-${title}-${status}-${date}.tex`;
                validations = validateWip(filename, type, { chapter, section, status });
            } else if (type === 'table') {
                const chapter = document.getElementById('wipChapter').value;
                const context = document.getElementById('wipContext').value;
                const switchType = document.getElementById('wipSwitch').value;
                const status = document.getElementById('wipStatus').value;

                if (!chapter || !context || !switchType) {
                    alert('Preencha todos os campos obrigat√≥rios');
                    return;
                }

                filename = `table-C${chapter}-${context}-${switchType}-${status}-${date}.tex`;
                validations = validateWip(filename, type, { chapter, context, switchType, status });
            } else if (type === 'notes') {
                const chapter = document.getElementById('wipChapter').value;
                const noteType = document.getElementById('wipNoteType').value;

                if (!chapter || !noteType) {
                    alert('Preencha cap√≠tulo e tipo');
                    return;
                }

                filename = `notes-${chapter}-${title}-${noteType}-${date}.md`;
                validations = validateWip(filename, type, { chapter, noteType });
            } else if (type === 'visual') {
                const chapter = document.getElementById('wipChapter').value;
                const visualType = document.getElementById('wipVisualType').value;
                const status = document.getElementById('wipStatus').value;
                const ext = document.getElementById('wipExt').value;

                if (!chapter || !visualType || !ext) {
                    alert('Preencha todos os campos');
                    return;
                }

                filename = `visual-C${chapter}-${title}-${visualType}-${status}-${date}${ext}`;
                validations = validateWip(filename, type, { chapter, visualType, status });
            }

            displayResult('wipResult', 'wipNameDisplay', 'wipValidation', filename, validations);
        }

        function validateWip(filename, type, details) {
            const validations = [];

            // 1. Lowercase
            validations.push({
                pass: filename === filename.toLowerCase(),
                text: 'Apenas min√∫sculas'
            });

            // 2. Caracteres v√°lidos
            const validCharsRegex = /^[a-z0-9\-\.]+$/;
            validations.push({
                pass: validCharsRegex.test(filename),
                text: 'Apenas a-z, 0-9, h√≠fens e ponto'
            });

            // 3. Sem espa√ßos
            validations.push({
                pass: !filename.includes(' '),
                text: 'Sem espa√ßos'
            });

            // 4. Comprimento
            validations.push({
                pass: filename.length <= 100,
                text: `Comprimento ‚â§ 100 (${filename.length} chars)`
            });

            // 5. Data v√°lida
            const dateRegex = /\d{4}-\d{2}-\d{2}/;
            validations.push({
                pass: dateRegex.test(filename),
                text: 'Data formato YYYY-MM-DD'
            });

            // 6. Status v√°lido
            const validStatus = ['dev', 'review', 'final', 'approved', 'deprecated'];
            validations.push({
                pass: validStatus.some(s => filename.includes(s)),
                text: 'Status v√°lido'
            });

            // 7. Prefixo correto
            validations.push({
                pass: filename.startsWith(type + '-'),
                text: `Come√ßa com: ${type}-`
            });

            // 8. Tipo-espec√≠ficas
            if (type === 'chapter' && details.chapter) {
                const chapterValid = parseInt(details.chapter) >= 1 && parseInt(details.chapter) <= 7;
                validations.push({
                    pass: chapterValid,
                    text: `Cap√≠tulo v√°lido (C1-C7): C${details.chapter}`
                });
            }

            if (type === 'section' && details.section) {
                validations.push({
                    pass: parseInt(details.section) > 0,
                    text: `Se√ß√£o v√°lida: S${details.section}`
                });
                validations.push({
                    pass: details.status && ['dev', 'review', 'final'].includes(details.status),
                    text: `Status v√°lido: ${details.status}`
                });
            }

            if (type === 'table') {
                const contextValid = ['AA', 'AG', 'DGFT', 'NAV', 'MFDS'].includes(details.context);
                const switchValid = ['TMS', 'DMS', 'CMS'].includes(details.switchType);
                validations.push({
                    pass: contextValid,
                    text: `Contexto v√°lido: ${details.context}`
                });
                validations.push({
                    pass: switchValid,
                    text: `Switch v√°lido: ${details.switchType}`
                });
            }

            if (type === 'notes') {
                const noteTypeValid = ['research', 'snippet', 'outline', 'questions', 'reference', 'example'].includes(details.noteType);
                validations.push({
                    pass: noteTypeValid,
                    text: `Tipo de nota v√°lido: ${details.noteType}`
                });
            }

            if (type === 'visual') {
                const visualTypeValid = ['diagram', 'flowchart', 'schematic', 'reference', 'illustration'].includes(details.visualType);
                validations.push({
                    pass: visualTypeValid,
                    text: `Tipo visual v√°lido: ${details.visualType}`
                });
            }

            return validations;
        }

        // Version System Generator with Enhanced Validation
        function detectRegime() {
            const version = document.getElementById('currentVersion').value;
            if (!version) return;

            const regimeInfo = document.getElementById('regimeInfo');
            const regimeType = document.getElementById('regimeType');
            const changeType = document.getElementById('changeType');
            const preGroup = document.getElementById('preGroup');
            const postGroup = document.getElementById('postGroup');

            const isPre = version.startsWith('0.');
            const isPost = !isPre && /^\d+\.\d+\.\d+$/.test(version);

            if (isPre) {
                regimeType.textContent = 'üîµ Pr√©-Publica√ß√£o (0.x.x.x)';
                regimeInfo.style.display = 'block';
                preGroup.style.display = 'optgroup';
                postGroup.style.display = 'none';
            } else if (isPost) {
                regimeType.textContent = 'üü¢ P√≥s-Publica√ß√£o (‚â•1.0, x.x.x)';
                regimeInfo.style.display = 'block';
                preGroup.style.display = 'none';
                postGroup.style.display = 'optgroup';
            } else {
                regimeInfo.style.display = 'none';
            }
            changeType.value = '';
        }

        function generateVersionName() {
            const currentVersion = document.getElementById('currentVersion').value;
            const changeType = document.getElementById('changeType').value;
            const snapshotDate = document.getElementById('snapshotDate').value;

            if (!currentVersion || !changeType || !snapshotDate) {
                alert('Preencha todos os campos obrigat√≥rios');
                return;
            }

            const versionParts = currentVersion.split('.').map(x => parseInt(x));
            const isPre = currentVersion.startsWith('0.');

            let newVersion = '';
            let majorChange = '';

            if (isPre) {
                const [major, minor, patch, subpatch] = versionParts;

                if (changeType === 'new-chapter') {
                    newVersion = `0.${minor + 1}.0.0`;
                    majorChange = 'üìå MINOR incremented (novo cap√≠tulo)';
                } else if (['restructure-chapter', 'table-major', 'latex-bugfix'].includes(changeType)) {
                    newVersion = `0.${minor}.${(patch || 0) + 1}.0`;
                    majorChange = 'üìå PATCH incremented (mudan√ßa estrutural)';
                } else if (['typo-fix', 'table-minor'].includes(changeType)) {
                    newVersion = `0.${minor}.${patch || 0}.${(subpatch || 0) + 1}`;
                    majorChange = 'üìå SUBPATCH incremented (refinamento)';
                }
            } else {
                const [major, minor, patch] = versionParts;

                if (['major-reorg', 'scope-change'].includes(changeType)) {
                    newVersion = `${major + 1}.0.0`;
                    majorChange = 'üìå MAJOR incremented (mudan√ßa ampla)';
                } else if (['add-chapter', 'expand-chapters'].includes(changeType)) {
                    newVersion = `${major}.${minor + 1}.0`;
                    majorChange = 'üìå MINOR incremented (expans√£o)';
                } else if (['errata', 'typo'].includes(changeType)) {
                    newVersion = `${major}.${minor}.${(patch || 0) + 1}`;
                    majorChange = 'üìå PATCH incremented (corre√ß√£o)';
                }
            }

            const dateFormatted = snapshotDate.replace(/-/g, '');
            const snapshotName = `guide-v${newVersion}-${dateFormatted}.tex`;
            const macros = `\\newcommand{\\docversion}{${newVersion}}\n\\newcommand{\\docbuild}{${dateFormatted}}`;

            const validations = validateVersion(snapshotName, newVersion);

            const resultBox = document.getElementById('versionResult');
            document.getElementById('versionNameDisplay').textContent = snapshotName;
            document.getElementById('versionMacrosDisplay').textContent = macros;

            let validationHTML = `<div style="margin-bottom: 12px;"><strong style="color: #32b8c6;">${majorChange}</strong></div>`;
            validations.forEach(v => {
                const icon = v.pass ? '‚úì' : '‚úó';
                const iconClass = v.pass ? 'pass' : 'fail';
                validationHTML += `
                    <div class="validation-item">
                        <div class="validation-icon ${iconClass}">${icon}</div>
                        <div class="validation-text">${v.text}</div>
                    </div>
                `;
            });

            document.getElementById('versionValidation').innerHTML = validationHTML;
            resultBox.classList.add('show');
        }

        function validateVersion(filename, version) {
            const validations = [];

            validations.push({
                pass: filename.match(/^guide-v[\d\.]+\-\d{8}\.tex$/),
                text: 'Formato: guide-vVERSION-YYYYMMDD.tex'
            });

            validations.push({
                pass: version.match(/^(0\.\d+\.\d+\.\d+|\d+\.\d+\.\d+)$/),
                text: 'Vers√£o: 0.x.x.x (pr√©) ou x.x.x (p√≥s)'
            });

            validations.push({
                pass: !filename.includes(' '),
                text: 'Sem espa√ßos'
            });

            validations.push({
                pass: filename === filename.toLowerCase(),
                text: 'Apenas min√∫sculas'
            });

            return validations;
        }

        function resetWipForm() {
            document.getElementById('wipType').value = '';
            document.getElementById('wipTitle').value = '';
            document.getElementById('wipFields').innerHTML = '';
            document.getElementById('wipResult').classList.remove('show');
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('wipDate').value = today;
        }

        function resetVersionForm() {
            document.getElementById('currentVersion').value = '';
            document.getElementById('changeType').value = '';
            document.getElementById('snapshotDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('versionResult').classList.remove('show');
            document.getElementById('regimeInfo').style.display = 'none';
        }

        function displayResult(resultBoxId, displayId, validationId, name, validations) {
            const resultBox = document.getElementById(resultBoxId);
            const display = document.getElementById(displayId);
            const validation = document.getElementById(validationId);

            display.textContent = name;

            let validationHTML = '';
            validations.forEach(v => {
                const icon = v.pass ? '‚úì' : '‚úó';
                const iconClass = v.pass ? 'pass' : 'fail';
                validationHTML += `
                    <div class="validation-item">
                        <div class="validation-icon ${iconClass}">${icon}</div>
                        <div class="validation-text">${v.text}</div>
                    </div>
                `;
            });

            validation.innerHTML = validationHTML;
            resultBox.classList.add('show');
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;

            navigator.clipboard.writeText(text).then(() => {
                const button = event.target;
                button.textContent = '‚úì Copiado!';
                button.classList.add('copied');
                setTimeout(() => {
                    button.textContent = button.id.includes('version') ? 'üìã Copiar' : 'üìã Copiar para Clipboard';
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        function scrollToSection(sectionId) {
            setTimeout(() => {
                const element = document.getElementById(sectionId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 100);
        }
    </script>
</body>
</html>
